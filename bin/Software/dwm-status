#!/bin/bash

MUSIC_STATE=true

function music_status {
	mpc | awk 'NR==2 {print $1}'
}

function music_name {
	mpc -f '%artist% - %title%' | sed -n 1p
}

function music_time {
	mpc | awk 'NR==2 {print $3}'
}

function music {
	if [[ $MUSIC_STATE == true ]]; then
		music_status | tr -d '\n'
		printf " "
		music_name   | tr -d '\n'
		printf " ["
		music_time   | tr -d '\n'
		printf "]"
	else
		printf "[stopped]"
	fi
}

function utime {
	date +%H:%M:%S
}

function volume {
	printf "Volume: "
	amixer | awk 'NR==6 {print $5}' | tr -d '[]\n'
}

if [[ $(mpc | awk 'NR==2 {print $1}') == "" ]]; then
	MUSIC_STATE=false
fi

volume
printf " | "
music
printf " | "
utime
